# 抖音开放平台配置指南

## 📋 获取 App ID 和 App Secret 步骤

### 第一步：登录抖音开放平台
1. 访问：https://developer.open-douyin.com/
2. 使用企业账号登录

### 第二步：创建应用
1. 点击控制台左上角 **"控制台"** → **"应用管理"**
2. 点击 **"创建应用"**
3. 填写应用信息：
   - **应用名称**：LinkBot-AI 智能客服系统
   - **应用类型**：网页应用
   - **应用描述**：全域获客智能客服系统，支持直播间和短视频自动回复
4. 点击 **"创建"**

### 第三步：获取 App ID 和 App Secret
创建成功后，在应用详情页面可以看到：

- **App ID (Client Key)**：类似于 `awxxxxxxxxxxxxx`
- **App Secret (Client Secret)**：类似于 `xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`

**重要提示**：
- App Secret 只显示一次，请立即复制保存
- 如果忘记，需要重新生成（之前的会失效）

### 第四步：配置回调地址

#### 方案A：使用本地开发（需要内网穿透）
1. 启动 ngrok：
   ```bash
   ngrok http 8080
   ```
2. 获取公网地址，例如：`https://abc123.ngrok-free.app`
3. 配置回调地址：`https://abc123.ngrok-free.app/oauth/callback`

#### 方案B：使用生产环境（推荐）
1. 部署到 Railway 或其他平台
2. 绑定域名，例如：`https://admin.linkbot-ai.com`
3. 配置回调地址：`https://admin.linkbot-ai.com/oauth/callback`

### 第五步：申请权限
在应用详情页面，点击 **"能力接入"**，申请以下权限：

#### 必需权限
1. **用户信息授权** (user_info)
   - 用于获取用户昵称、头像等基本信息

2. **视频信息** (video.list)
   - 用于获取视频列表和视频信息

3. **视频评论** (video.comment)
   - 用于获取评论列表、发送评论回复

#### 可选权限
4. **直播间消息** (im_room)
   - 用于监听直播间评论和互动

5. **私信发送** (im_send)
   - 用于向用户发送私信

### 第六步：提交审核
1. 填写应用信息
2. 上传应用截图（可用LinkBot-AI界面截图）
3. 提交审核
4. 审核时间：1-3个工作日

### 第七步：配置环境变量

获取到 App ID 和 App Secret 后，配置到项目中：

```bash
# 在 .env 文件中添加
DOUYIN_APP_ID=你的AppID
DOUYIN_APP_SECRET=你的AppSecret
DOUYIN_REDIRECT_URI=https://你的域名/oauth/callback

# 或者临时使用 ngrok 地址
DOUYIN_REDIRECT_URI=https://abc123.ngrok-free.app/oauth/callback
```

### 第八步：测试授权流程
1. 访问：http://localhost:3000
2. 登录后台
3. 进入"渠道中心" → "抖音接入"
4. 点击"抖音扫码授权"
5. 使用抖音扫描二维码
6. 完成授权

## 🔍 常见问题

### Q1: 如何知道应用是否审核通过？
答：在应用列表页面，如果显示"已通过"或"启用中"，说明审核通过了。

### Q2: App Secret 忘记了怎么办？
答：需要重新生成 App Secret。但旧的 App Secret 会失效，需要重新配置。

### Q3: 回调地址填错了怎么办？
答：可以修改回调地址，立即生效，无需重新审核。

### Q4: 权限申请失败怎么办？
答：确保企业认证已通过，应用描述清晰。如果仍失败，联系抖音开放平台客服。

### Q5: 开发阶段可以使用测试吗？
答：可以，在"应用能力"中开启"沙箱环境"，可进行测试调用。

## 📞 联系方式

- 抖音开放平台客服：400-990-5656
- 官方文档：https://developer.open-douyin.com/docs/overview
- 开放平台社区：https://open.douyin.com/club

---

**记录时间**：2025-10-27  
**状态**：待配置 App ID 和 App Secret
