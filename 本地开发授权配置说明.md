# 本地开发授权配置说明

## 📋 本地开发授权流程

主公，由于不使用ngrok，本地开发时授权回调需要使用**本地地址**。

### ⚠️ 重要限制

**抖音开放平台不支持 localhost 回调地址**，所以本地开发时：

1. **方案一：使用测试账号**（推荐）
   - 在抖音开放平台配置测试回调地址
   - 使用测试环境进行开发

2. **方案二：修改hosts文件**（临时方案）
   - 将 `127.0.0.1` 映射到域名
   - 在抖音开放平台配置该域名作为回调地址

3. **方案三：使用生产环境**（最终方案）
   - 部署到服务器
   - 使用真实域名配置回调

## 🔧 当前配置

已修改为本地地址：
```
REDIRECT_URI=http://localhost:8080/oauth/callback
```

## 📝 抖音开放平台配置

在抖音开放平台配置回调地址时：

### 开发阶段
- 如果平台支持，可以配置：`http://localhost:8080/oauth/callback`
- 如果不支持，需要使用方案二（hosts映射）

### 生产阶段
- 配置真实域名：`https://your-domain.com/oauth/callback`

## 🚀 快速解决方案

如果抖音开放平台不支持localhost，可以：

1. **修改hosts文件**：
   ```bash
   sudo vim /etc/hosts
   # 添加：
   127.0.0.1 linkbot.local
   ```

2. **修改回调地址**：
   ```
   REDIRECT_URI=http://linkbot.local:8080/oauth/callback
   ```

3. **在抖音开放平台配置**：
   ```
   http://linkbot.local:8080/oauth/callback
   ```

4. **重启Go服务**使配置生效

