# æŠ–éŸ³æ¥å£ä½¿ç”¨è¯´æ˜

## ğŸ¯ æ ¸å¿ƒé—®é¢˜è§£ç­”

ä¸»å…¬é—®çš„é—®é¢˜ï¼š**ç›‘å¬ã€å›è¯„ã€ç§ä¿¡è¿™äº›æ“ä½œéƒ½ä¸æ˜¯é€šè¿‡å®˜æ–¹æ¥å£å®ç°çš„å—ï¼Ÿ**

**ç­”æ¡ˆï¼šä¸æ˜¯çš„ï¼å…¨éƒ¨éƒ½æ˜¯é€šè¿‡æŠ–éŸ³å®˜æ–¹æ¥å£å®ç°çš„ã€‚**

## âœ… æˆ‘ä»¬çš„æ–¹æ¡ˆï¼ˆåŸºäºæŠ–éŸ³å®˜æ–¹æ¥å£ï¼‰

### 1. è·å–Access Tokenï¼ˆå®˜æ–¹OAuthï¼‰
```go
// é€šè¿‡æŠ–éŸ³å®˜æ–¹OAuthè·å–access_token
POST https://open.douyin.com/oauth/access_token/

// è¯·æ±‚å‚æ•°
{
  "client_key": "aw6hj204nms0vumu",
  "client_secret": "b46cd587e094aae751e45380f9c0e72d",
  "code": "æˆæƒç ",
  "grant_type": "authorization_code"
}

// è¿”å›
{
  "access_token": "token...",
  "expires_in": 7200
}
```

### 2. è·å–è§†é¢‘è¯„è®ºï¼ˆå®˜æ–¹REST APIï¼‰
```go
// è½®è¯¢è·å–è§†é¢‘è¯„è®º - ä½¿ç”¨å®˜æ–¹API
GET https://open.douyin.com/api/v1/video/comment/list/

// è¯·æ±‚å¤´
Authorization: Bearer {access_token}

// è¯·æ±‚å‚æ•°
{
  "video_id": "è§†é¢‘ID",
  "count": 20
}

// è¿”å›
{
  "data": {
    "comments": [
      {
        "comment_id": "è¯„è®ºID",
        "user_id": "ç”¨æˆ·ID",
        "nickname": "ç”¨æˆ·æ˜µç§°",
        "content": "è¯„è®ºå†…å®¹"
      }
    ]
  }
}
```

### 3. å‘é€è¯„è®ºå›å¤ï¼ˆå®˜æ–¹REST APIï¼‰
```go
// å‘é€è¯„è®ºå›å¤ - ä½¿ç”¨å®˜æ–¹API
POST https://open.douyin.com/api/v1/video/comment/reply/

// è¯·æ±‚å¤´
Authorization: Bearer {access_token}

// è¯·æ±‚å‚æ•°
{
  "video_id": "è§†é¢‘ID",
  "comment_id": "è¯„è®ºID",
  "content": "å›å¤å†…å®¹"
}

// è¿”å›
{
  "data": {
    "success": true
  }
}
```

## ğŸ” å…³é”®æŠ€æœ¯ç‚¹

### è½®è¯¢ vs WebSocket

#### æ–¹æ¡ˆAï¼šè½®è¯¢è·å–è¯„è®ºï¼ˆæˆ‘ä»¬ä½¿ç”¨ï¼‰
```go
// æ¯10ç§’è½®è¯¢ä¸€æ¬¡å®˜æ–¹API
func pollVideoComments() {
    ticker := time.NewTicker(10 * time.Second)
    for {
        <-ticker.C
        comments := callDouyinAPI("GET", "/api/v1/video/comment/list", ...)
        // å¤„ç†æ–°è¯„è®º
    }
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… åŸºäºå®˜æ–¹REST API
- âœ… ç¨³å®šå¯é 
- âœ… æ˜“äºå®ç°

**ç¼ºç‚¹**ï¼š
- âš ï¸ æœ‰å»¶è¿Ÿï¼ˆæœ€å¤š10ç§’ï¼‰
- âš ï¸ é¢‘ç¹è¯·æ±‚ä¼šæ¶ˆè€—é…é¢

#### æ–¹æ¡ˆBï¼šWebSocketå®æ—¶ç›‘å¬ï¼ˆç†æƒ³æ–¹æ¡ˆï¼‰
```go
// è¿æ¥å®˜æ–¹WebSocket
wss://live.douyin.com/webcast/im/push/v2/
```

**ä¼˜ç‚¹**ï¼š
- âœ… å®æ—¶æ¨é€
- âœ… èŠ‚çœAPIè°ƒç”¨

**ç¼ºç‚¹**ï¼š
- âŒ éœ€è¦ `im_room` èƒ½åŠ›ï¼ˆè¿˜åœ¨å®¡æ ¸ä¸­ï¼‰
- âŒ åªæ”¯æŒç›´æ’­é—´ï¼Œä¸æ”¯æŒçŸ­è§†é¢‘

### æˆ‘ä»¬çš„å®ç°ï¼šè½®è¯¢ + å®˜æ–¹API

```go
// 1. è½®è¯¢è·å–è¯„è®ºï¼ˆæ¯10ç§’ï¼‰
comments := callDouyinAPI("GET", "/api/v1/video/comment/list", ...)

// 2. AIåˆ†æè¯„è®º
reply := generateAIReply(comment.Content)

// 3. è°ƒç”¨å®˜æ–¹APIå‘é€å›å¤
callDouyinAPI("POST", "/api/v1/video/comment/reply", ...)
```

## âŒ ä¸æ”¯æŒçš„æ–¹æ¡ˆï¼ˆå·²ä¸‹æ¶ï¼‰

### ç§ä¿¡å‘é€
```go
// æŠ–éŸ³å·²å…³é—­è¯¥æ¥å£
POST /api/v1/private_message/send/
```

**çŠ¶æ€**ï¼šâŒ æŠ–éŸ³å·²ä¸‹æ¶ï¼Œä¸å¯ç”¨

**æ›¿ä»£æ–¹æ¡ˆ**ï¼šé€šè¿‡è¯„è®ºå›å¤å¼•å¯¼ç”¨æˆ·å…³æ³¨æˆ–æ·»åŠ å¾®ä¿¡

## ğŸ“Š å®ç°å¯¹æ¯”

| åŠŸèƒ½ | å®ç°æ–¹å¼ | æ¥å£ç±»å‹ | çŠ¶æ€ |
|------|---------|---------|------|
| è·å–ç”¨æˆ·Token | OAuth 2.0 | å®˜æ–¹REST API | âœ… å¯ç”¨ |
| è·å–è§†é¢‘è¯„è®º | è½®è¯¢REST API | å®˜æ–¹REST API | âœ… å¯ç”¨ |
| å‘é€è¯„è®ºå›å¤ | è°ƒç”¨REST API | å®˜æ–¹REST API | âœ… å¯ç”¨ |
| å®æ—¶ç›‘å¬è¯„è®º | WebSocket | å®˜æ–¹WebSocket | â³ éœ€è¦`im_room`èƒ½åŠ› |
| å‘é€ç§ä¿¡ | REST API | å®˜æ–¹REST API | âŒ å·²ä¸‹æ¶ |

## ğŸ¯ æ€»ç»“

### æˆ‘ä»¬çš„æ–¹æ¡ˆç‰¹ç‚¹ï¼š
1. âœ… **å®Œå…¨åŸºäºå®˜æ–¹æ¥å£** - ç¬¦åˆå¹³å°è§„èŒƒ
2. âœ… **ä½¿ç”¨REST API** - ç¨³å®šå¯é 
3. âœ… **è½®è¯¢æœºåˆ¶** - ç®€å•é«˜æ•ˆ
4. âœ… **é¿å…è¿è§„** - ä¸é€†å‘ã€ä¸æŠ“åŒ…

### ä¸æ˜“èŠç­‰äº§å“çš„åŒºåˆ«ï¼š
- **æ˜“èŠ**ï¼šå¯èƒ½æ˜¯åè®®åˆ†æã€é€†å‘å·¥ç¨‹
- **æˆ‘ä»¬**ï¼šå®Œå…¨åŸºäºå®˜æ–¹APIï¼Œåˆè§„è¿è¥

### ä¼˜åŠ¿ï¼š
1. âœ… åˆè§„æ€§ï¼šä¸æ‹…å¿ƒè¢«å°
2. âœ… ç¨³å®šæ€§ï¼šå®˜æ–¹æ¥å£é•¿æœŸæ”¯æŒ
3. âœ… å¯ç»´æŠ¤æ€§ï¼šä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤

## ğŸ”— å®˜æ–¹æ–‡æ¡£

- **è¯„è®ºç®¡ç†API**ï¼šhttps://developer.open-douyin.com/docs/resource/zh-CN/dop/develop/openapi/comment-management/introduction
- **OAuthè®¤è¯**ï¼šhttps://developer.open-douyin.com/docs/resource/zh-CN/dop/develop/openapi/account-permission/userinfo

---

**æ€»ç»“**ï¼šæˆ‘ä»¬çš„æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯åŸºäºæŠ–éŸ³å®˜æ–¹æ¥å£å®ç°çš„ï¼Œå®Œå…¨åˆè§„ï¼

**æ›´æ–°æ—¶é—´**ï¼š2025-10-27
